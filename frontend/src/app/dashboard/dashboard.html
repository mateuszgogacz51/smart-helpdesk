<div class="dashboard-container">
  <div class="dashboard-card">

    <header class="dashboard-header">
      <div class="header-content">
        <h2>ğŸ‘‹ CzeÅ›Ä‡, {{ currentUser }}</h2>
        <p class="role-badge">{{ currentUserRole }}</p>
      </div>
      <button class="logout-btn" (click)="logout()">Wyloguj</button>
    </header>

    <div class="dashboard-content">
      
      <div class="top-bar">
        <h3>Lista zgÅ‚oszeÅ„</h3>
        <button class="add-ticket-btn" (click)="createNewTicket()">
          <span>+</span> Nowe zgÅ‚oszenie
        </button>
      </div>

      <div class="filters-panel">
        
        <div class="filter-group">
          <label>Status:</label>
          <select [(ngModel)]="filterStatus" (change)="applyFilters()" class="styled-select">
            <option value="ALL">Wszystkie</option>
            <option value="OPEN">ğŸŸ¢ Otwarte</option>
            <option value="IN_PROGRESS">ğŸŸ  W toku</option>
            <option value="CLOSED">âš« ZamkniÄ™te</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Sortuj:</label>
          <select [(ngModel)]="sortOrder" (change)="applyFilters()" class="styled-select">
            <option value="NEWEST">ğŸ“… Najnowsze</option>
            <option value="OLDEST">ğŸ“… Najstarsze</option>
            <option value="STATUS">ğŸ“Š Po statusie</option>
          </select>
        </div>

        <div class="filter-group checkbox-group" *ngIf="currentUserRole !== 'USER'">
          <input type="checkbox" id="myTickets" [(ngModel)]="onlyAssignedToMe" (change)="applyFilters()">
          <label for="myTickets">Przypisane do mnie</label>
        </div>

      </div>

      <div class="ticket-list">
        <div class="ticket-item" *ngFor="let ticket of visibleTickets" (click)="openTicketDetails(ticket.id)">
          
          <div class="ticket-left">
            <span class="status-dot" [ngClass]="getStatusClass(ticket.status)"></span>
            <div class="ticket-main-info">
              <span class="ticket-id">#{{ ticket.id }}</span>
              <span class="ticket-title">{{ ticket.title }}</span>
              <div class="ticket-meta">
                <span>ğŸ“‚ {{ ticket.category }}</span>
                <span *ngIf="ticket.assignedUser" class="assignee-badge">
                  ğŸ› ï¸ {{ ticket.assignedUser.firstName }}
                </span>
              </div>
            </div>
          </div>

          <div class="ticket-right">
            <span class="date-info">{{ ticket.createdDate | date:'shortDate' }}</span>
            <span class="status-pill" [ngClass]="getStatusClass(ticket.status)">
              {{ ticket.status }}
            </span>
          </div>

        </div>

        <div *ngIf="visibleTickets.length === 0" class="empty-state">
          <p>ğŸ“­ Brak zgÅ‚oszeÅ„ pasujÄ…cych do filtrÃ³w.</p>
        </div>
      </div>

    </div>
  </div>
</div>